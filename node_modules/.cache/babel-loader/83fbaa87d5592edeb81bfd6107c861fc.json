{"ast":null,"code":"var _jsxFileName = \"/Users/sicongzhang/Documents/ScribeAR/ver3_5/src/components/MiddleSpace/Loudness/AudioVisualiser.js\";\nimport React, { Component } from 'react';\nimport { useSelector } from 'react-redux';\n\nclass AudioVisualiser extends Component {\n  constructor(props) {\n    super(props);\n    this.canvas = React.createRef();\n  }\n\n  draw() {\n    const bgC = useSelector(state => state.invertColors);\n    console.log(bgC);\n    const audioData = this.props.audioData;\n    const canvas = this.canvas.current;\n    const height = canvas.height;\n    const width = canvas.width;\n    const context = canvas.getContext('2d');\n    let x = 0;\n    const sliceWidth = width * 1.0 / audioData.length;\n    context.lineWidth = 2; //context.strokeStyle = this.props.iscolor ? '#F8F8FF' : '#000000';\n\n    context.clearRect(0, 0, width, height);\n    context.beginPath();\n    context.moveTo(0, height / 2);\n\n    for (const item of audioData) {\n      const y = item / 255.0 * height;\n      context.lineTo(x, y);\n      x += sliceWidth;\n    }\n\n    context.lineTo(x, height / 2);\n    context.strokeStyle = bgC ? '#000000' : '#F8F8FF';\n    context.stroke();\n  }\n\n  componentDidUpdate() {\n    this.draw();\n  }\n\n  render() {\n    return React.createElement(\"canvas\", {\n      width: \"500vw\",\n      height: \"300vh\",\n      ref: this.canvas,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default AudioVisualiser;","map":{"version":3,"sources":["/Users/sicongzhang/Documents/ScribeAR/ver3_5/src/components/MiddleSpace/Loudness/AudioVisualiser.js"],"names":["React","Component","useSelector","AudioVisualiser","constructor","props","canvas","createRef","draw","bgC","state","invertColors","console","log","audioData","current","height","width","context","getContext","x","sliceWidth","length","lineWidth","clearRect","beginPath","moveTo","item","y","lineTo","strokeStyle","stroke","componentDidUpdate","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,WAAT,QAA4B,aAA5B;;AAGA,MAAMC,eAAN,SAA8BF,SAA9B,CAAwC;AAEtCG,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,MAAL,GAAcN,KAAK,CAACO,SAAN,EAAd;AACD;;AACDC,EAAAA,IAAI,GAAG;AACN,UAAMC,GAAG,GAAGP,WAAW,CAAEQ,KAAD,IAAWA,KAAK,CAACC,YAAlB,CAAvB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYJ,GAAZ;AAFM,UAGEK,SAHF,GAGgB,KAAKT,KAHrB,CAGES,SAHF;AAIN,UAAMR,MAAM,GAAG,KAAKA,MAAL,CAAYS,OAA3B;AACA,UAAMC,MAAM,GAAGV,MAAM,CAACU,MAAtB;AACA,UAAMC,KAAK,GAAGX,MAAM,CAACW,KAArB;AACA,UAAMC,OAAO,GAAGZ,MAAM,CAACa,UAAP,CAAkB,IAAlB,CAAhB;AACA,QAAIC,CAAC,GAAG,CAAR;AACA,UAAMC,UAAU,GAAIJ,KAAK,GAAG,GAAT,GAAgBH,SAAS,CAACQ,MAA7C;AACAJ,IAAAA,OAAO,CAACK,SAAR,GAAoB,CAApB,CAVM,CAWN;;AAEAL,IAAAA,OAAO,CAACM,SAAR,CAAkB,CAAlB,EAAqB,CAArB,EAAwBP,KAAxB,EAA+BD,MAA/B;AACAE,IAAAA,OAAO,CAACO,SAAR;AACAP,IAAAA,OAAO,CAACQ,MAAR,CAAe,CAAf,EAAkBV,MAAM,GAAG,CAA3B;;AACA,SAAK,MAAMW,IAAX,IAAmBb,SAAnB,EAA8B;AAC3B,YAAMc,CAAC,GAAID,IAAI,GAAG,KAAR,GAAiBX,MAA3B;AACAE,MAAAA,OAAO,CAACW,MAAR,CAAeT,CAAf,EAAkBQ,CAAlB;AACAR,MAAAA,CAAC,IAAIC,UAAL;AACD;;AACFH,IAAAA,OAAO,CAACW,MAAR,CAAeT,CAAf,EAAkBJ,MAAM,GAAG,CAA3B;AACAE,IAAAA,OAAO,CAACY,WAAR,GAAsBrB,GAAG,GAAG,SAAH,GAAe,SAAxC;AACAS,IAAAA,OAAO,CAACa,MAAR;AACF;;AAEDC,EAAAA,kBAAkB,GAAG;AACjB,SAAKxB,IAAL;AACD;;AAEDyB,EAAAA,MAAM,GAAG;AACP,WAAO;AAAQ,MAAA,KAAK,EAAC,OAAd;AAAsB,MAAA,MAAM,EAAC,OAA7B;AAAqC,MAAA,GAAG,EAAE,KAAK3B,MAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAP;AACD;;AAtCqC;;AA0CxC,eAAeH,eAAf","sourcesContent":["import React, { Component } from 'react';\nimport { useSelector } from 'react-redux'\n\n\nclass AudioVisualiser extends Component {\n\n  constructor(props) {\n    super(props);\n    this.canvas = React.createRef();\n  }\n  draw() {\n   const bgC = useSelector((state) => state.invertColors)\n   console.log(bgC)\n   const { audioData } = this.props;\n   const canvas = this.canvas.current;\n   const height = canvas.height;\n   const width = canvas.width;\n   const context = canvas.getContext('2d');\n   let x = 0;\n   const sliceWidth = (width * 1.0) / audioData.length;\n   context.lineWidth = 2;\n   //context.strokeStyle = this.props.iscolor ? '#F8F8FF' : '#000000';\n\n   context.clearRect(0, 0, width, height);\n   context.beginPath();\n   context.moveTo(0, height / 2);\n   for (const item of audioData) {\n      const y = (item / 255.0) * height;\n      context.lineTo(x, y);\n      x += sliceWidth;\n    }\n   context.lineTo(x, height / 2);\n   context.strokeStyle = bgC ? '#000000' : '#F8F8FF';\n   context.stroke();\n}\n\ncomponentDidUpdate() {\n    this.draw();\n  }\n\n  render() {\n    return <canvas width=\"500vw\" height=\"300vh\" ref={this.canvas} />;\n  }\n\n}\n\nexport default AudioVisualiser;\n"]},"metadata":{},"sourceType":"module"}